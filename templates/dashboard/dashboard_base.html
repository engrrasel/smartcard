<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Dashboard{% endblock %}</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root {
    --bg-main:#F7F7F7;
    --sidebar-bg:#FFFFFF;
    --primary:#007BFF;
    --text-dark:#212529;
    --border-color:#E3E6EA;
}

body{
    font-family:'Inter',sans-serif;
    background:var(--bg-main);
    color:var(--text-dark);
    overflow-x:hidden;
}

/* ================= Sidebar ================= */
.sidebar{
    width:250px;
    height:100vh;
    background:rgba(255,255,255,0.72);
    backdrop-filter:blur(12px);
    position:fixed;
    top:0; left:0;
    border-right:1px solid rgba(0,0,0,0.08);
    box-shadow:4px 0 25px rgba(0,0,0,0.05);
    border-radius:0 20px 20px 0;
    display:flex;
    flex-direction:column;
    padding:1.3rem 1rem;
    transition:0.35s ease;
    z-index:1000;
}

.sidebar.hide{ left:-260px; }

.sidebar .menu{
    flex:1;
    overflow-y:auto;
    padding-bottom:80px;
}

.sidebar h3{
    font-size:1.4rem;
    font-weight:700;
    margin-bottom:1.5rem;
    padding-left:4px;
}

.sidebar a{
    display:flex;
    align-items:center;
    gap:10px;
    padding:12px 15px;
    margin-bottom:8px;
    border-radius:14px;
    text-decoration:none;
    color:var(--text-dark);
    font-weight:500;
    background:rgba(255,255,255,0.6);
    backdrop-filter:blur(6px);
    transition:0.25s;
}
.sidebar a:hover{
    transform:translateX(4px);
    background:var(--primary);
    color:#fff !important;
    box-shadow:0 4px 14px rgba(0,0,0,0.15);
}
.sidebar a.active{
    background:var(--primary);
    color:white !important;
    box-shadow:0 6px 18px rgba(0,0,0,0.25);
}

/* ====== App Badges ====== */
.app-badges{
    text-align:center;
    margin:12px 0;
}
.app-badges img{
    width:150px;
    margin:6px 0;
    border-radius:10px;
    cursor:pointer;
    box-shadow:0 4px 14px rgba(0,0,0,0.12);
    transition:.25s;
}
.app-badges img:hover{
    transform:scale(1.04);
}

/* Coming soon text */
.coming-soon{
    font-size:.9rem;
    font-weight:600;
    text-align:center;
    margin-top:5px;
    margin-bottom:15px;
    color:#444;
}

/* Logout */
.logout-box{
    background:rgba(255,255,255,0.85);
    padding:15px 0;
    backdrop-filter:blur(10px);
}
.logout-btn{
    width:100%;
    background:#E74C3C;
    border:none;
    color:white;
    border-radius:10px;
    padding:10px;
    font-weight:600;
}

/* ================= Main ================= */
.main{
    margin-left:260px !important;
    width:calc(100% - 260px) !important;
    min-height:100vh !important;
    background:linear-gradient(135deg,#f3f7ff,#fff);
    padding:2.2rem !important;
    transition:0.35s ease;
}

.main.expand{
    margin-left:0 !important;
    width:100% !important;
}

/* Mobile Fix */
@media(max-width:991px){
    .sidebar{ left:-260px; }
    .sidebar.open{ left:0; box-shadow:4px 0 15px rgba(0,0,0,.18); }
    .main{ margin-left:0 !important; width:100% !important; padding:18px !important; }
}

.sidebar-toggle{
    position:fixed;
    left:15px;
    top:15px;
    z-index:1100;
    background:rgba(255,255,255,0.85);
    border:1px solid rgba(0,0,0,0.1);
    backdrop-filter:blur(6px);
    border-radius:12px;
    padding:8px 12px !important;
}
</style>
</head>

<body>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">

    <div class="menu">
        <h3><i class="fa-solid fa-id-card-clip"></i> SmartCard</h3>

        <a href="{% url 'app_accounts:dashboard' %}"
           class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
           <i class="fa-solid fa-house"></i> Dashboard
        </a>

        <a href="{% url 'app_accounts:profile_and_card' %}"
           class="{% if request.resolver_match.url_name == 'profile_and_card' %}active{% endif %}">
           <i class="fa-solid fa-id-badge"></i> Profile & Card
        </a>

        <a href="{% url 'app_contacts:contact_dashboard' %}"
           class="{% if request.resolver_match.url_name == 'contact_dashboard' %}active{% endif %}">
           <i class="fa-solid fa-address-book"></i> Contacts
        </a>

        <a href="{% url 'app_pages:job_list' %}"
            class="{% if request.resolver_match.url_name == 'job_list' %}active{% endif %}">
            <i class="fa-solid fa-briefcase"></i> Job / Recruitment

            {% if unread_job_count and unread_job_count > 0 %}
                <span class="badge bg-danger ms-auto">{{ unread_job_count }}</span>
            {% endif %}
        </a>


        <!-- â­ NEW: Pages Menu -->
        <a href="{% url 'app_pages:company_pages' %}"
           class="{% if request.resolver_match.url_name == 'company_pages' %}active{% endif %}">
           <i class="fa-solid fa-building"></i> Pages
        </a>

        <a href="{% url 'app_accounts:subscription' %}"
           class="{% if request.resolver_match.url_name == 'subscription' %}active{% endif %}">
           <i class="fa-solid fa-credit-card"></i> Subscription
        </a>

        <a href="{% url 'app_settings:settings_home' %}"
           class="{% if 'settings' in request.path %}active{% endif %}">
           <i class="fa-solid fa-gear"></i> Settings
        </a>
    </div>

    <!-- â­ NEW: App Badges + Coming Soon -->
    <div class="app-badges">

        <div class="coming-soon">ðŸ“± Our Mobile Apps Are Coming Soon</div>

        <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg"
             alt="App Store">

        <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg"
             alt="Google Play">
    </div>

    <!-- Logout -->
    <div class="logout-box">
        <form method="post" action="{% url 'app_accounts:logout' %}">
            {% csrf_token %}
            <button class="logout-btn">
                <i class="fa-solid fa-right-from-bracket"></i> Logout
            </button>
        </form>
    </div>

</div>

<!-- Sidebar Toggle -->
<button class="sidebar-toggle" id="toggleBtn">
    <i class="fa-solid fa-bars"></i>
</button>

<!-- Main -->
<main class="main">
    {% block content %}{% endblock %}
</main>

<!-- Toast -->
<div class="toast-container position-fixed top-0 end-0 p-3">
    {% for message in messages %}
    <div class="toast text-bg-{{ message.tags }} shadow-sm border-0">
        <div class="d-flex">
            <div class="toast-body">{{ message }}</div>
            <button type="button" class="btn-close me-2" data-bs-dismiss="toast"></button>
        </div>
    </div>
    {% endfor %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", ()=>{

    const sidebar = document.getElementById("sidebar");
    const toggle = document.getElementById("toggleBtn");
    const main = document.querySelector(".main");

    toggle.addEventListener("click", (e)=>{
        e.stopPropagation();
        sidebar.classList.toggle("open");
        sidebar.classList.toggle("hide");
        main.classList.toggle("expand");
    });

    /* Close sidebar on outside click (Mobile) */
    document.addEventListener("click", (e)=>{
        if(sidebar.classList.contains("open") &&
           !sidebar.contains(e.target) &&
           e.target !== toggle){
            sidebar.classList.remove("open");
            sidebar.classList.add("hide");
            main.classList.add("expand");
        }
    });

    /* Toast messages */
    document.querySelectorAll(".toast")
        .forEach(t=> new bootstrap.Toast(t, { delay:3000 }).show());
});
</script>

</body>
</html>
