{% extends "dashboard/dashboard_base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container py-4">

    <h3 class="fw-bold mb-4">Dashboard Overview</h3>

    <!-- Stats -->
    <div class="row g-4 mb-4">
        <div class="col-md-4">
            <div class="card shadow-sm border-0 p-3 text-center">
                <h6>Total Profiles</h6>
                <h2 class="fw-bold">{{ total_profiles }}</h2>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm border-0 p-3 text-center">
                <h6>Monthly Views</h6>
                <h2 class="fw-bold">{{ monthly_views }}</h2>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm border-0 p-3 text-center">
                <h6>Yearly Views</h6>
                <h2 class="fw-bold">{{ yearly_views }}</h2>
            </div>
        </div>
    </div>

    <!-- Profile List -->
    <h5 class="fw-bold mb-3">Your Profiles</h5>

    {% for p in profiles %}
        <div class="card p-3 shadow-sm border-0 mb-2">
            <div class="d-flex justify-content-between align-items-center">

                <div>
                    <h6 class="mb-0 fw-bold">{{ p.full_name|default:"Unnamed Profile" }}</h6>
                    <small class="text-muted">
                        {{ p.job_title|default:"No title" }} â€” {{ p.company_name|default:"" }}
                    </small>
                </div>

                <!-- Correct URL for single profile dashboard -->
                <a href="{% url 'app_accounts:profile_and_card_dashboard' p.id %}"
                   class="btn btn-primary btn-sm">
                    View
                </a>
            </div>
        </div>

    {% empty %}
        <p class="text-muted">No profiles yet. Create one now.</p>
    {% endfor %}

</div>
{% endblock %}
